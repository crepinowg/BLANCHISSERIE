
{% extends 'base.html.twig' %}

{% block ajoutClient %}
<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from cleancloudapp.com/register by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Sep 2022 20:43:21 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Sign up for CleanCloud, the leading software for dry cleaners, laundromats and laundry services.">
    <meta name="keywords" content="">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="apple-touch-icon" sizes="180x180" href="./frontend-website/v4/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./frontend-website/v4/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./frontend-website/v4/assets/images/favicons/favicon-16x16.png">
    <link rel="mask-icon" href="./frontend-website/v4/assets/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="preload" href="./frontend-website/v4/assets/fonts/Galano%20Grotesque%20Medium.otf" as="font" crossorigin>
    <link rel="preload" href="./frontend-website/v4/assets/fonts/Galano%20Grotesque.otf" as="font" crossorigin>
    <link rel="stylesheet" href="./frontend-website/stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="./frontend-website/cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./frontend-website/v4/assets/css/normalize.css">
    <link rel="stylesheet" href="./frontend-website/v4/assets/css/styles8e5e.css?v=15">
    <link rel="stylesheet" href="./frontend-website/v4/assets/css/aos.css">
    <link rel="stylesheet" href="./frontend-website/v4/assets/css/intlTelInput.css">
    <link rel="stylesheet" href="./frontend-website/v4/assets/css/slick.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" />
    <style>
        body {
          font-family: 'Poppins';
          
        }
      </style>
    <title>Sign Up | CleanCloud Dry Cleaning and Laundry Software</title>

    </head>
<style>
    .intl-tel-input.allow-dropdown .flag-container:hover .selected-flag {background:#fff;}
    .intl-tel-input.allow-dropdown .selected-flag {border-right:1px solid #E6ECF7;width:56px;}
    .intl-tel-input .country-list .country {background:#fff;  font-family: "Galano Grotesque Medium", sans-serif;}
</style>
<body class="signup-page" >
    <style>
        body{
            background-color: red;
        }
    </style>

<!-------------------------ANNOUNCE BAR----------------------------->

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MKDV3JV"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


<!-------------------------NAV BAR---------------------------------->
<header id="header" >
    <div class="row justify-content-between mobile-wrapper">
       
        <nav class="d-flex" style="display:none !important;" >
            <div class="links">
                <div class="links-item features-dropdown">
                    <a href="#" class="features-toggle" data-toggle="features" aria-expanded="false">Features
                        <img src="./frontend-website/v4/assets/images/arrow_down_blue.svg">
                    </a>
                    <div class="features_nav">
                        <a href="features.html#point-of-sales">
                            <img src="./frontend-website/v4/assets/images/features/point_of_sales.svg" alt="Point of Sale">
                            <div class="desc">
                                <p class="title">Point of Sale</p>
                                <p class="description">Support for all devices, with barcode scanner, printer and payment support</p>
                            </div>
                        </a>
                        <a href="features.html#hosted-website">
                            <img src="./frontend-website/v4/assets/images/features/hosted_website.svg" alt="Hosted Website">
                            <div class="desc">
                                <p class="title">Hosted Website</p>
                                <p class="description">Get started with a professional looking website as part of your subscription</p>
                            </div>
                        </a>
                        <a href="features.html#assembly">
                            <img src="./frontend-website/v4/assets/images/features/assembly.svg" alt="Assembly">
                            <div class="desc">
                                <p class="title">Assembly </p>
                                <p class="description">Support for assembly in both your store and your plant or central cleaning facility</p>
                            </div>
                        </a>
                        <a href="features.html#hardware">
                            <img src="./frontend-website/v4/assets/images/features/hardware.svg" alt="Hardware">
                            <div class="desc">
                                <p class="title">Hardware</p>
                                <p class="description">Works with any device: PC, Mac, iOS, Android, Chromebooks</p>
                            </div>
                        </a>
                        <a href="features.html#pickup">
                            <img src="./frontend-website/v4/assets/images/features/pickup_and_delivery.svg" alt="Pickup and Delivery">
                            <div class="desc">
                                <p class="title">Pickup and Delivery</p>
                                <p class="description">Grow your business by offering pickup and delivery</p>
                            </div>
                        </a>
                        <a href="features.html#payments">
                            <img src="./frontend-website/v4/assets/images/features/payment.svg" alt="Payments">
                            <div class="desc">
                                <p class="title">Payments</p>
                                <p class="description">Use your existing card terminal or use our in store payment integrations</p>
                            </div>
                        </a>
                        <a href="features.html#lockers">
                            <img src="./frontend-website/v4/assets/images/features/lockers.svg" alt="Lockers">
                            <div class="desc">
                                <p class="title">Lockers</p>
                                <p class="description">Automate the workflow between your laundry lockers and CleanCloud</p>
                            </div>
                        </a>
                        <a href="features.html#reports">
                            <img src="./frontend-website/v4/assets/images/features/reporting.svg" alt="Reporting">
                            <div class="desc">
                                <p class="title">Reporting</p>
                                <p class="description">View key statistics how your store are performing compare to other time periods</p>
                            </div>
                        </a>
                        <a href="features.html#multi-store">
                            <img src="./frontend-website/v4/assets/images/features/multi_store.svg" alt="Multiple Stores and Plant">
                            <div class="desc">
                                <p class="title">Multiple Stores and Plant</p>
                                <p class="description">Manage the cleaning workflow for multiple stores from one place</p>
                            </div>
                        </a>
                        <a href="features.html#marketing">
                            <img src="./frontend-website/v4/assets/images/features/marketing.svg" alt="Marketing">
                            <div class="desc">
                                <p class="title">Marketing</p>
                                <p class="description">Send out marketing via SMS, targeting key sections of your customers</p>
                            </div>
                        </a>
                        <a href="features.html#laundromats">
                            <img src="./frontend-website/v4/assets/images/features/laundromats.svg" alt="Laundromats">
                            <div class="desc">
                                <p class="title">Laundromats</p>
                                <p class="description">Track your machine costs and repair history</p>
                            </div>
                        </a>
                        <a href="features.html#security">
                            <img src="./frontend-website/v4/assets/images/features/security.svg" alt="Security">
                            <div class="desc">
                                <p class="title">Security</p>
                                <p class="description">We backup your data everyday to independent servers.</p>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="links-item">
                    <a href="multi-store.html">Multi-Store</a>
                </div>
                <div class="links-item">
                    <a href="testimonials.html">Testimonials</a>
                </div>
                <div class="links-item">
                    <a href="pricing.html">Pricing</a>
                </div>
                <div class="links-item">
                    <a href="grow-your-business.html">Grow Your Business</a>
                </div>
                <div class="links-item">
                    <a href="blog.html">Blog</a>
                </div>
            </div>
            <div class="connect">
                <a href="login.html" class="button_secondary--small">Log in</a>
                <a href="register.html" class="button_primary--small">Sign up</a>
            </div>
        </nav>

        <div class="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
</header>
<style>
    #confirm-signup-popup-opacity-layer {
        display: none;
        position: fixed;
        top: 0%;
        left: 0%;
        bottom: 0;
        right: 0;
        width: 100%;
        height: 100%;
        background-color: black;
        z-index: 1001;
        -moz-opacity: 0.8;
        opacity: .80;
        filter: alpha(opacity=80);
    }
    #confirm-signup-popup {
        display:none;
        z-index:1002;
        position:fixed;
        width:100%;
        max-width:520px;
        margin: 5% auto;
        left: 0;
        right: 0;
        padding: 45px 50px;
        background-color: #fff;
        -webkit-box-shadow: 1px 3px 15px rgb(194 201 214 / 32%);
        box-shadow: 1px 3px 15px rgb(194 201 214 / 32%);
        border-radius: 10px;
    }
</style>

<script>

    function pinSubmit() {
        let newPin = $("#confirm_pin").val().trim();
        let oldButtonText = $("#submit_confirm_email_button").html();

        if(newPin == "" || isNaN(newPin) || newPin.length != 6) {
            $("#confirm_pin_error").html('PIN is not correct length or format').slideDown();
            return false;
        }


        $('#submit_confirm_email_button').html('Submitting...').attr('disabled', 'disabled');

        ajax_register(newPin);
        return false;

    }
</script>
<div id="confirm-signup-popup-opacity-layer">
    </div>
<div id="confirm-signup-popup">
    <h2>Confirm Your Email</h2>
    <div id="confirm_pin_error" style="display:none;font-family: sans-serif;padding:15px;margin-bottom:10px;border-radius:5px;color:#fff;background:red;">
    </div>
    <div style="line-height:1.5;" class="confirm_email_popup_text">
    <p>We sent a 6 digit PIN to your email address <span id="confirm-signup-email"></span>. Please enter it below.</p>
    </div>

    <form action="#" method="POST" id="confirm_popup_form" onsubmit="return pinSubmit()">

        <div class="form-group">
            <label for="confirm_pin">PIN</label>
            <input type="text" class="form-control" id="confirm_pin" name="confirm_pin" value="">
        </div>

        <button type="submit" class="button_action--large" id="submit_confirm_email_button">Submit</button>
    </form>
</div>

<section class="hero_signup container_padding" style="margin-top: -15px;">
    <h1>Ajouter votre nouveau gérant</h1>
    <p class="subtitle--small">
        <span class="d-lg-block">Accorder un certains niveau d'accès à votre gérant.</span>
        <span class="d-lg-block">Vous pouvez le suspendre/activer à tout moment</span>
    </p>
</section>

<section class="signup-section">
 {% for gerants in gerant.utilisateur %}
    <!--<form action="{{path('app.gerant.register')}}" method="POST">-->
    <form id="my-form">
        

        <h4 style="margin-bottom:24px;margin-top:48px;">Informations personnelles</h4>
        
        <div class="form-group email">
            <label for="register_email">Salaire<span style="font-size: 10px;">(Domicile)</span></label>
            <input type="text" class="form-control" id="adresse" name="salaire" value="{{gerant.salaire}}">
        </div>
       


        <div class="signup_error" id="signup_error" style="background:red;color:#fff;padding:24px;border-radius:4px;  font-family: 'Galano Grotesque', sans-serif;font-size:14px;margin-bottom:12px;display:none;">
            Example Error        </div>

        <button type="submit" class="button_action--large" id="" >Intéger un gérant</button>
        
                    <!--begin::Alert-->
                    <div class="alert alert-dismissible bg-light-danger border border-danger flex-column flex-sm-row p-5 mb-10 d-none">
                        <!--begin::Icon-->
                        <span class="svg-icon svg-icon-2hx svg-icon-danger me-4 mb-5 mb-sm-0">...</span>
                        <!--end::Icon-->

                        <!--begin::Wrapper-->
                        <div class="d-flex flex-column pe-0 pe-sm-10">
                            <!--begin::Title-->
                            <h5 class="mb-1">Erreur 404<span class="alert-identifiant"></span></h5>
                            <!--end::Title-->
                            <!--begin::Content-->
                            <span class="alert-text">The alert component can be used to highlight certain parts of your page for higher content visibility.</span>
                            <!--end::Content-->
                        </div>
                        <!--end::Wrapper-->

                        <!--begin::Close-->
                        <button type="button" class="position-absolute position-sm-relative m-2 m-sm-0 top-0 end-0 btn btn-icon ms-sm-auto" data-bs-dismiss="alert">
                            <i class="bi bi-x fs-1 text-danger"></i>
                        </button>
                        <!--end::Close-->
                    </div>
                    <!--end::Alert-->
    </form>
    {% endfor %}
</section>

<script>
    $(document).ready(function () {
            $.ajax({
                type: 'GET',
                url: '/dataGerant',
                dataType: 'json',
                success: function Object(response) {
                    console.log("RESPONSE: "+response);
                    email = document.getElementById('email');
                    adresse = document.getElementById('adresse');
                    username = document.getElementById('username');
                    //password = document.getElementById('password');
                    niveau = document.getElementById('niveau');
                    nom = document.getElementById('nom');
                    contact = document.getElementById('contact');
                    
                    buttonSubmit = document.getElementById('integrer');
                    
                        let isCheckEmail = false;
                        let isCheckContact = false;
                        let isCheckUsername = false;
                        email.addEventListener("input", function () {
                            let isCheck = false;
                            for (let key in response) {
                                if (email.value == response[key].email) {
                                    $(".invalid-existant-email").removeClass("d-none");
                                    $(".valid-email").addClass("d-none");
                                    console.log("EXISTE");
                                    isCheck = true;
                                    
                                }
                                else if (email.value != response[key].email && isCheck != true) {
                                    $(".invalid-existant-email").addClass("d-none");
                                    $(".valid-email").removeClass("d-none");
                                    isCheckEmail = true;
                                
                                    
                                }
                                if (email.value == "") {
                                    $(".invalid-existant-email").addClass("d-none");
                                    $(".valid-email").addClass("d-none");
                                    
                                }
                            }  
                        })
                        contact.addEventListener("input", function () {
                            let isCheck = false;
                            var regexp = /^\228\d{1,8}$/;

                            for (let key in response) {
                                if (contact.value == response[key].numero) {
                                    $(".invalid-existant-contact").removeClass("d-none");
                                    $(".valid-contact").addClass("d-none");
                                    console.log("EXISTE");
                                    isCheck = true;
                                }
                                else if (contact.value != response[key].numero && isCheck != true) {
                                    $(".invalid-existant-contact").addClass("d-none");
                                    $(".valid-contact").removeClass("d-none");
                                    isCheckContact =true;
                                   
                                    
                                }
                                
                            if (contact.value == "") {
                                    $(".invalid-existant-contact").addClass("d-none");
                                    $(".valid-contact").addClass("d-none");
                                    
                                }
                            }  
                        })
                        username.addEventListener("input", function () {
                            let isCheck = false;
                            for (let key in response) {
                                if (username.value == response[key].username) {
                                    $(".invalid-existant-username").removeClass("d-none");
                                    $(".valid-username").addClass("d-none");
                                    isCheck = true;
                                }
                                else if (username.value != response[key].username && isCheck != true) {
                                    $(".invalid-existant-username").addClass("d-none");
                                    $(".valid-username").removeClass("d-none");
                                    isCheckUsername = true;
                                    
                                    
                                }
                                if (username.value == "") {
                                    $(".invalid-existant-username").addClass("d-none");
                                    $(".valid-username").addClass("d-none");
                                    
                                }
                            }
                        })
                  
                   
            },
                error: function (xhr, status, error) {
                    console.log("OKAY");
                    console.log('Erreur : ' + xhr.responseText);
                }
            });

        });
</script>

<script>
    $(document).ready(function() {
      $('#my-form').submit(function(e) {
        e.preventDefault(); // Empêche la soumission du formulaire par défaut
        var formData = $(this).serialize(); // Récupère les données du formulaire
        $.ajax({
          url: "/gerant_update-{{gerant.id}}",
          method: 'POST',
          data: formData,
          success: function(response) {
            //$('#result').html(response); // Met à jour la vue avec la réponse renvoyée par le contrôleur
           
           var champ = document.querySelector('.alert-dismissible');
            console.log("RESPONSE: "+response);
            if(response!=""){
                console.log("oKAAAAZy");
                var text = document.querySelector('.alert-text');
                text.innerText= response;
                champ.classList.remove("d-none");
            }

            if (response.success) {
                console.log("oKAy");
                window.location.href = response.redirect_url;
            }
            
            
        },

        error: function(xhr, status, error) {
            console.log('Erreur : ' + (xhr.responseText));
            //var errors = JSON.parse(xhr.responseText).errors;
            // Affichez les messages d'erreur à l'utilisateur
        },
          
        });
      });
    });
  </script>





<!-------------------------------------- SCRIPTS -------------------------------->
<script type="text/javascript" src="./frontend-website/cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="./frontend-website/stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="./frontend-website/v4/assets/js/main.js"></script>
<script src="js/intlTelInput.min.js"></script>


</body>


<!-- Mirrored from cleancloudapp.com/register by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Sep 2022 20:43:29 GMT -->
</html>

{% endblock %}
